# Enable mod_rewrite
<IfModule mod_rewrite.c>
  RewriteEngine On

  # Avoid rewriting existing files or directories
  RewriteCond %{REQUEST_FILENAME} -f [OR]
  RewriteCond %{REQUEST_FILENAME} -d
  RewriteRule ^ - [L]

  # Redirect direct requests to .php URLs to extensionless URL (301)
  # Example: /login.php -> /login
  RewriteCond %{THE_REQUEST} \s/([^\s]+?)\.php[\s?] [NC]
  RewriteRule ^ /%1 [R=301,L]

  # Internally rewrite extensionless URLs to .php files if they exist
  # Example: /login -> /login.php
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_FILENAME}.php -f
  RewriteRule ^(.*)$ $1.php [L]

</IfModule>

# Default index file
DirectoryIndex index.php index.html
